<div class="content">
    <h1>Login</h1>

    <h3><span id="clientid"></span> is requesting these scopes</h3>
    <ul id="scopes"></ul>
    <h3>With this State</h3>
    <p id="state"></p>

    <form method="post" action="/users/login">
        <input type="text" name="username">
        <input type="text" name="password">
        <input id="ru" type="hidden" name="redirect_uri">
        <input id="cid" type="hidden" name="client_id">
        <input id="st" type="hidden" name="state">
        <input id="sc" type="hidden" name="scope">
        <input id="cc" type="hidden" name="code_challenge">
        <input id="cm" type="hidden" name="code_challenge_method">
        <input type="submit" value="submit">
    </form>
</div>
<script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
<script>
    var urlParams = new URLSearchParams(window.location.search);

    var scopes = [];
    if (urlParams.has("scope")) {
        scopes = urlParams.get("scope").split(' ');
    }
    for (var i = 0; i < scopes.length; i++) {
        var ul = $("<ul>");
        ul.text(scopes[i]);
        $("#scopes").append(ul);
    }
    $("#clientid").text(urlParams.get("client_id"));
    $("#state").text(urlParams.get("state"));
    $("#cid").val(urlParams.get("client_id"));
    $("#ru").val(urlParams.get("redirect_uri"));
    $("#st").val(urlParams.get("state"));
    $("#sc").val(urlParams.get("scope"));
    $("#cc").val(urlParams.get("code_challenge"));
    $("#cm").val(urlParams.get("code_challenge_method"));
    if (urlParams.get("code_challenge") == null) {
        $(".content").html("<h1>Malformed Request</h1>");
    }
</script>